build-osx:
  stage: build
  tags:
    - darwin
  script:
    - python3 -m venv venv
    - . venv/bin/activate
    - pip install --upgrade pip
    - pip install -r requirements.txt
    - fbs freeze --debug
    - fbs installer
  only:
    - master
  artifacts:
    expose_as: 'build_darwin'
    paths: ['target/Lambent4Qt.dmg']

build-win:
  stage: build
  tags:
    - windows
  script:
    # for starters: choco install vcbuildtools
    # and then choco install python --version=3.7.7
    # and choco install git --params "/GitAndUnixToolsOnPath"
    - C:\Python37\python.exe -m venv venv
    - .\venv\Scripts\activate.bat
    - pip install --upgrade pip wheel
    - pip install -r requirements.txt
    - fbs freeze --debug
    - fbs installer
    - dir target
    
  only:
    - master

